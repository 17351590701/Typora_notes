## Springboot自动配置原理



## 属性配置

> 通过 @Value + SPEL 表达式直接绑定springboot配置文件中的值
>
> 通过前缀批量绑定 @ConfigurationProperties(prefix = "user")`不支持SPEL`

导入@Value注解，别导错

`import org.springframework.beans.factory.annotation.Value;`

在application.yml中配置

```yaml
user:
  username: zhangyurun
  age: 21
  hobbies: [唱,跳,rapper]
  maps: {key1: value1,key2: value2}
```

`User`

```java
@Data
@Component
@ConfigurationProperties(prefix = "user")
public class User {
  	//@Value("${user.username}")
    private String username;
    private Integer age;
    private String[] hobbies;
    private Map<String,String> maps;
}
```

## 数据校验

引入依赖

```java
 <!--validated依赖-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency>
```

对javaBean进行校验

添加注解`@Validated`,`@NotNull`

```java
@Data
@Component
@ConfigurationProperties(prefix = "user")
@Validated
public class User {
    private String username;
    private Integer age;
    private String[] hobbies;
    private Map<String,String> maps;
    @NotNull
    private String Address;
}
```

**结果**：

```java
// 错误信息
Property:user.Address
Value:"null"
Reason:不能为null
```

