模版模式

```java
// 实现InitializingBean用于afterPropertiesSet()的注册方法
public abstract class AbstractColaHandler implements InitializingBean {
    public void getCoca(String parameter) {
        throw new UnsupportedOperationException();
    }

    // 模版方法1,可乐业务
    public String cocaMethod(String name) {
        throw new UnsupportedOperationException();
    }

    // 模版方法2，百事业务
    public String pepsiMethod(String name) {
        throw new UnsupportedOperationException();
    }

    // 模版方法3，娃哈哈业务
    public String wahahaMethod(String name) {
        throw new UnsupportedOperationException();
    }

    public void initResource() {
        System.out.println("init抽象父类已经统一实现，子类也可覆写");
    }

    // 留给子类实现的通用方法
    public abstract void invokeCommon();
}
```

工厂模式

```java
public class Factory {
    // 定义策略Map缓存，存储key 和 具体子类实例
    private static Map<String,AbstractColaHandler> strategyMap = new ConcurrentHashMap<>();

    public static AbstractColaHandler getStrategy(String key){
        return strategyMap.get(key);
    }
    public static void register(String key,AbstractColaHandler handler){
        strategyMap.put(key,handler);
    }
}
```

具体实现子类

```java
@Component
public class CocaHandler extends AbstractColaHandler{
    @Override
    public void getCoca(String parameter) {
        System.out.println("可口可乐-策略-工厂-模版"+parameter);
    }

    @Override
    public String cocaMethod(String name) {
        return "可口可乐独有的方法";
    }

    @Override
    public void invokeCommon() {
    }
    // 工厂模式,当bean初始化完成之后,将当前bean注册到工厂Map中
    @Override
    public void afterPropertiesSet() {
        Factory.register("Coca",this);
    }
}
```

测试方法，spring中需要添加@SpringbootTest，以便bean的初始化

```java
@SpringBootTest
public class testMethod {
    @Test
    void method(){
        String parameter = "Coca";
        AbstractColaHandler handler  = Factory.getStrategy(parameter);
        handler.getCoca(parameter);
        handler.invokeCommon();
        System.out.println(handler.cocaMethod("Coca可口可乐"));
    }
}
```

